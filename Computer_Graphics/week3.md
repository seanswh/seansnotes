(1) 三维旋转
现在我们考虑三维空间中关于坐标轴的旋转。
二维旋转可以看作是绕着Z轴的特殊旋转。因为z轴保持不变，因此，矩阵这些地方的值是0，0，1，0，0，0，1。而X坐标和Y坐标同二维情况一样：分别是cos， -sin， sin cos。相似地，关于X轴的旋转，矩阵的值分别是1， 0， 0， 1， 0， 0， cos -sin， sin cos。同理可以得到关于Y轴旋转的矩阵。因为Y等于Z叉乘X，因此矩阵和之前的稍有不同，这里是cos， -sin，sin， cos但是形式是一样的。
![](/Computer_Graphics/images/7.png)

现在我们来讲讲三维旋转的几何解释。
我们可以把矩阵的每一行当做一个新的**单位向量**，因此，我们可以写成u向量，v向量以及w向量，x_u是u向量的X坐标，y_u是u向量的Y坐标，z_u是u向量的Z坐标。类似地，得到向量v和w的三个分量。向量u是新坐标系的坐标轴，向量u = x_u*X + y_u*Y + z_u*Z。当给定了3个正交向量，正交就意味着，向量u点乘向量v等于0，向量u点乘向量w等于0，
向量v点乘向量w等于0，并且u，v，w都是单位向量。所以，给定任意的这样三个向量，就可以确定标准的XYZ坐标系下的一个旋转，通过这些向量我们可以构建一个旋转矩阵。
还有一种有趣的考虑方式：我们可以用这种方式写下这个旋转矩阵。 有u向量，v向量和w向量，当这个矩阵乘以一个点，x_u， x_p， y_u， y_p， z_u，z_p， 正好是u点乘p，因此结果等于u点乘p，v点乘p和w点乘p。因此，实际上我们做的仅仅是把点p映射到新的坐标系里了。因此，我们有u点乘p，v点乘p，w点乘p。这是一个非常简单的三维旋转的解释，
你有一个新的坐标系，接着你在这个新坐标系下得到了p的点积。
![](/Computer_Graphics/images/8.png)
总而言之，旋转矩阵的三行是新坐标系的3个单位向量，我们可以根据任意三个正交向量构建一个旋转矩阵，并且可以很有效地将一个点映射到这个新的坐标系下。

最后的问题是，在三维情况下，我们是否能给出一个任意的旋转的公式?
推导分三步：1.假设b绕着a旋转某个角度theta，可以将向量b分解为一个垂直于a的分量和一个平行于a的分量。 平行的分量是沿着向量a的方向的，因此这个分量将不会改变。现在，我们知道向量b沿着a方向上的分量，这个分量的值就是a点乘b。假设a，b都是单位向量，因此不需要单位化。这是沿着a方向的，因此这里乘以a。这就是b平行于a的分量。 而b垂直于a的分量，等于向量b减去平行分量。![](/assets/9.png)
第二步，需要定义一个同时垂直于a和b的向量c。通常，c会用叉积的形式定义。这里我们就
用a叉乘b来定义向量c。我们想要a叉乘b中与旋转有关的量。沿着c方向的分量等于
c乘以旋转量。只有sin(theta)真正被旋转，其余剩下的部分就是b的垂直分量乘以cos(theta)。
总结：这里把b首先分成垂直a分量和平行a分量
平行分量= $$aa^Tb$$
垂直分量=$$b-aa^Tb$$
然后再进一步划分垂直分量，引入了c向量，其中垂直分量分成垂直于c向量和平行于c向量的2部分，垂直于c向量的部分不会改变，而平行于c向量的部分会随着旋转改变，
垂直分量分为$$(b-aa^Tb)cos\theta$$(垂直于c)和$$(A^*bsin\theta)$$(平行于c)，再将上述三项相加，可得如下公式


