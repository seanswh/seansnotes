(1)不同坐标系下的转换
在很多其他情形下，你想要一个特定的物理位置，在不同的坐标系间变换。
通常，坐标系可以平移和旋转。
坐标系的中心可以在世界的某个地方，并且可以改变方向，坐标轴也可以不同。
![](/Computer_Graphics/images/13.png)
这是世界坐标系，有一个坐标原点，x轴和y轴。
在相机坐标系中，这是视点的位置(e)，u、v坐标轴相当于x和y坐标轴。
让我们看P点，我们想知道P点的坐标。在世界坐标下，其x坐标值为2，y坐标值为0.9。
它在相机坐标系下的坐标是不一样的。在很多情况下，你需要做这种转换。你在世界坐标系下有一个几何位置，你想计算出它在相机坐标系下的位置，就要同时考虑相机旋转的坐标系和相机的位置以及视点的位置。

如果你还记得我对二维旋转的推导，一个点P旋转到P'，P与x轴的夹角为alpha，而P到P'的旋转角为theta。最后用alpha和theta相加得到的角度来表示P'。如果你写下P'的x和y坐标简化三角函数，你会得到一个这样的旋转矩阵：
cos(theta)×x - sin(theta)×y, sin(theta)×x  cos(theta)×y，所以，这是你的旋转轴。
![](/Computer_Graphics/images/14.png)
对于旋转点和旋转坐标系的关系，你可以认为这个点是固定的，而坐标系向反方向做了旋转。的确，这就是坐标系旋转后的样子，这是新的u轴，这是新的v轴，这个坐标系顺时针旋转了theta角度，相反，这个点逆时针旋转了theta角度。
实际上，新的uv坐标系在老的xy坐标系下的位置为：cos(theta)·x - sin(theta)·y，sin(theta)·x + cos(theta)·y。这也很好地给出我们前面讨论过的三维旋转的几何解释：**旋转矩阵的每一行都是一个单位向量，这些单位向量构成了新的坐标系**。因此，大家可以从任意的3个正交向量构建一个旋转矩阵。

（2）gluLookAt
gluLookAt是OpenGL中观察变换的一个关键函数。我们将要讨论的这个用于放置相机的函数，对于我们观察图像很关键。让我们来看一下这个函数的参数。
首先是视点的x坐标、y坐标和z坐标，还有观察方向的中心的x坐标、y坐标和z坐标，另外，你还有一个相机向上的向量。**视点**所在的位置对应于你在哪里放置视点或相机，然而，向上的方向对应于相机的朝向或顶部方向，或者相当于你如何转你的头。(具体说明可参考https://blog.csdn.net/ivan_ljf/article/details/8764737)

推导过程涉及三个主要步骤。首先我们需要为相机建立一个坐标系。然后，我们需要为相机的坐标系建立一个旋转矩阵。最后，我们需要对相机或视点位置施加平移变换。

**首先**，假设有一个向量a和一个向量b，其中a是从视点到中心的向量，而b是向上的方向。但是a和b可能不正交也不是单位向量，而且你还需要求出坐标系的第三根坐标轴。所以，你要做的就是首先找到一个w向量，w是a单位化的结果，它相当于z轴。然后，你需要删除v沿着w的分量，
一个更好的替代的方法是用b叉乘w来定义u。因此，这个叉积自动地移除了要删的部分。最后，你就可以使用w叉乘u定义v了。于是得到这样一个正交的坐标系。![](/Computer_Graphics/images/15.png)
但我需要知道a和b是多少?回到问题的描述，我们想把相机放在原点，朝着-Z方向观察。在OpenGL中，你经常把相机放在原点并且朝(0,0,-1)观察。所以，这里沿着-Z方向观察，向量center - eye表示-Z方向，相反地，eye - center就是+Z方向，向量b简单地定义为向上的向量。这就是这两个向量：a和b， eye-center 和 视点。有了这些，你就可以使用上面给出的公式计算u，v，w了。
**第二步**，创建旋转矩阵。上一节我们得知，旋转矩阵的行是新坐标系的3个单位基向量。当给定了u，v，w，你知道了u的x，y，z坐标，v的x，y，z坐标，w的x，y，z坐标，矩阵的三行分别是向量u，v，w。所以，你已经得到了这个相机的旋转矩阵。
最后一步，