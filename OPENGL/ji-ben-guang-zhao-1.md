### 光照基础

现实世界的光照是极其复杂的，而且会受到诸多因素的影响，这是以目前我们所拥有的计算能力无法模拟的。因此OpenGL的光照仅仅使用了简化的模型并基于对现实的估计来进行模拟，这样处理起来会更容易一些，而且看起来也差不多一样。其中一个模型被称为冯氏光照模型\(Phong Lighting Model\)。冯氏光照模型的主要结构由3个元素组成：环境\(Ambient\)、漫反射\(Diffuse\)和镜面\(Specular\)光照。这些光照元素看起来像下面这样：![](/OPENGL/images/basic_lighting_phong.png)

环境光照\(Ambient Lighting\)：即使在黑暗的情况下，世界上也仍然有一些光亮\(月亮、一个来自远处的光\)，所以物体永远不会是完全黑暗的。我们使用环境光照来模拟这种情况，也就是无论如何永远都给物体一些颜色。

漫反射光照\(Diffuse Lighting\)：模拟一个发光物对物体的方向性影响\(Directional Impact\)。它是冯氏光照模型最显著的组成部分。面向光源的一面比其他面会更亮。

镜面光照\(Specular Lighting\)：模拟光滑物体上面出现的亮点。镜面光照的颜色，相比于物体的颜色更倾向于光的颜色。

### 环境光照\(ambient\)

光通常都不是来自于同一光源，而是来自散落于我们周围的很多光源.它可以向很多方向发散和反弹，所以光最后到达的地点可能并不是它所临近的直射方向；光能够像这样**反射\(Reflect\)**到其他表面，一个物体的光照可能受到来自一个非直射的光源影响。考虑到这种情况的算法叫做**全局照明\(Global Illumination\)**算法，但是这种算法既开销高昂又极其复杂。

我们可以使用一种简化的且开销极低的方式来计算全局照明模型，该模型称为环境光照模型。

将环境光照加入到OPENGL场景中极为简单，我们用光的颜色乘以一个系数常量，再乘以物体自身的颜色即可作为该片元的颜色了：

```
void main()
{ 
    float ambientStrength = 0.1f;
    vec3 ambient = ambientStrength * lightColor;
    vec3 result = ambient * objectColor;
    color = vec4(result, 1.0f);
}
```

### 漫反射\(diffuse\)

环境光不会产生太多的光源，漫反射则会提供明显的视觉影响。片元距离光源发出的光线越近，物体的亮度就越大。如下图所示：

![](/OPENGL/images/diffuse_light.png)

左上方有一个光源，光源发射的光线落在某一个片元上，我们需要测量光线和它接触到的片元间的角度。如果光线垂直于片元，则光照亮度最大。

计算漫反射角度需要：1）法向量\(上图黄色向量\)；2。光线向量（光源与片元位置之差）









