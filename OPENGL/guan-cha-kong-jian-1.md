### 摄像机

当我们定义场景中的摄像机时，我们需要定义这个摄像机的位置，观察方向、指向它右侧的方向以及指向它上方的方向——其实是一个以摄像头为原点，三个互相垂直单位轴的坐标系。

1.摄像机位置

摄像机位置比较好确定，就是在世界空间中指向摄像机位置的一个向量。注意从屏幕向外的方向是Z轴正方向。

2.摄像机方向向量 camera direction vector

方向向量其实不是很好的名字，它实际上是指从观察物体位置到摄像机的方向。正好是摄像机指向方向的相反方向。

3.右轴

这个是摄像机坐标轴的x轴方向，为了获得这个方向，我们可以先定义一个向上的向量\(Up vector\)，然后把这个向量跟方向向量进行叉乘，把叉乘后的结果标准化，就得到x轴正方向

4.上轴

这个是相机坐标系的y轴正方向，还是用之前两个轴叉乘后标准化可得。

### LOOKAT

使用矩阵的一个好处是，一旦定义了三个相互垂直的坐标轴，就可以利用这些坐标轴再加上一个平移向量创建一个新的矩阵，这个矩阵可以将任何向量变换到这个矩阵所定义的坐标系空间中。

这就是LookAt矩阵要做的工作，经过上面的几步，我们已经有了三个互相垂直的坐标系，也有了一个位置向量，从而可以定义摄像机空间了，因此我们的LookAt矩阵如下图所示：


$$
LookAt = \begin{bmatrix} \color{red}{R_x} & \color{red}{R_y} & \color{red}{R_z} & 0 \\ \color{green}{U_x} & \color{green}{U_y} & \color{green}{U_z} & 0 \\ \color{blue}{D_x} & \color{blue}{D_y} & \color{blue}{D_z} & 0 \\ 0 & 0 & 0  & 1 \end{bmatrix} * \begin{bmatrix} 1 & 0 & 0 & -\color{purple}{P_x} \\ 0 & 1 & 0 & -\color{purple}{P_y} \\ 0 & 0 & 1 & -\color{purple}{P_z} \\ 0 & 0 & 0  & 1 \end{bmatrix}
$$
R是右轴，U是上轴，D是方向向量，P是摄像机的位置，注意这里面位置向量相反的，因为我们最终需要将世界按照我们希望的相反方向移动\(移动场景与移动相机正好相反\)

