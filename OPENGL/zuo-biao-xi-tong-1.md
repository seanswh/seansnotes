# 概述

这次要学的坐标系统较为基础。前面我们学习了顶点着色器和矩阵变换，这次要看如何将世界坐标、物体坐标与OPENGL的绘制坐标进行转换。

OpenGL希望在所有顶点着色器运行后，所有我们可见的顶点都变为标准化设备坐标\(Normalized Device Coordinate, NDC\)。也就是说，每个顶点的x，y，z坐标都应该在-1.0到1.0之间，超出这个坐标范围的顶点都将不可见。

一般来说，我们都为每一个物体创建一个自己的坐标系统，，然后在顶点着色器里转换成标准化的设备坐标\(NDC\)，这些NDC坐标会传送到光栅着色器，然后把这些坐标转成屏幕上的2D坐标。将物体坐标转换成NDC坐标，然后再转化成屏幕坐标通常是将顶点坐标一步一步的通过中间的几个坐标系统最后变成屏幕坐标的，这样的好处是中间的几个坐标系统在做一些操作或者计算会变得更容易一些。

对我们来说，有5个不同的坐标系统非常关键：

1.局部空间\(Local Space\)；2.世界空间\(World Space\)；3.视角空间\(观察空间\);4.裁剪空间；5.屏幕空间

当我们的顶点坐标最终变成片元之前，都会经历上述5个状态。

将一个坐标系空间转换成另外一个坐标系空间我们通常使用变换矩阵，其中最重要的是模型、视图以及投影矩阵。我们的物体上的顶点坐标会从局部空间和局部坐标系开始，然后i经过世界坐标系、视角坐标系、裁剪坐标系，最后变换至屏幕坐标系。如下图所示：

![](/OPENGL/images/coordinate_systems.png)

1.局部坐标是指相对于局部原点的坐标，是你的物体的起始坐标；

2.第二步是将物体坐标转换成世界坐标，这是在一个更大的世界范围内的空间系统，这个坐标相对的是世界原点，同时世界空间中会有许多其他的物体也会相对于世界原点。

3.然后我们将世界坐标转换成视角坐标，这个坐标系是以摄像机或者观察者的位置为原点的坐标系统

4.在视角坐标系的基础上，我们可以使用裁剪坐标系统将他们进行投影，裁剪坐标系会将顶点处理成-1到1之间，然后决定哪些坐标会在屏幕之外。

5.最后我们使用一个叫“视口变换”的过程，将裁剪坐标转换成屏幕坐标，然后将-1到1之间的坐标转成glViewport中定义的范围。最后的坐标传到栅格化过程\(光栅着色器\),最后变成片元。

之所以会分成这么多的空间，是因为有些操作和变换在特殊的空间坐标系中才会有意义，也更加容易一些，比如，当我们改变物体的形状是，在局部空间\(local space\)中会更有意义一些，而当物体在做相对于其他物体的操作时，应该使用世界坐标。

当然，我们也可以定义一个从本地坐标直接到裁剪坐标的变换矩阵，但是这样会缺少很多灵活性。

